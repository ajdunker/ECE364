#! /bin/bash
#
# $Author$
# $Date$
# $HeadURL$
# $Revision$

exec 4<"file_list"
while read line <&4
do
    echo "$line: "
    if [[ $(svn status $line | wc -c) == 0 ]]
    then
	if [[ -x $line ]]
	then
	    echo " file is in SVN and executable"
	else
	    echo " file is in SVN, but not executable. "
	    svn propset svn:executable ON $line
	fi
    else
	if [[ -e $line && -x $line ]]
	then
	    svn add $line
	elif [[ -e $line && ! -x $line ]]
	then
	    echo " file is not executable, would you like to make it? [y/n]"
	    read a
	    if [[ $a == y ]]
	    then
		chmod +x $line
	    fi
	    svn add $line
	elif [[ ! -e $line ]]
	then
	    echo "Error: File $line appears to not exist here or in svn"
	fi
     fi
done

echo "Auto-committing code"
svn commit
exit 0